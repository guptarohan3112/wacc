image: alexusher/wacc:latest

stages:
    - build
    - testlocal
    - testdeploy

build:
    stage: build
    script:
        - make clean && make

testlocal:
    script:
        - make
        - ./gradlew semanticTests
    only:
        - master
testdeploy:
    script:
        - make
        - ./gradlew errorTests
    only:
        - master